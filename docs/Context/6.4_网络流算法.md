# 6.4 网络流算法



### 定义

* 一个**流量网络**是一张边的权重（这里称为**容量**）为正的加权有向图。
* 一个 **st- 流量网络**有两个已知的顶点，即起点 s 和终点 t。
* st- 流量网络中的 **st- 流量配置**是由一组和每条边相关联的值组成的集合，这个值被称为**边的流量**。如果所有边的流量均小于边的容量且满足每个顶点的**局部平衡**（即净流量 = 流入量 - 流出量 = 0，s 和 t 除外），那么就称这种流量配置方案是**可行的**。
* **最大流量问题**：给定一个 st- 流量网络，找到一种 st- 流量配置，使得从 s 到 t 的流量最大化。

### API

FlowEdge 并不基于之前的 DirectedEdge，因为需要使每条边都出现在它的两个顶点的邻接表中才能实现剩余网络。**剩余网络**能够增减流量并检测一条边是否已经饱和（无法再增大流量）或者是否为空（无法再减小流量）。

流量网络中的边的 API：

| public class FlowEdge | 说明 | 
| :----: | :----: |
| FlowEdge(int v, int w, double cap) | |
| int from() | 这条边的起始顶点 |
| int to()  | 这条边的目的顶点 |
| int other(int v) | 边的另一个顶点 |
| double capacity() | 边的容量 |
| double flow() | 边中的流量 |
| double residualCapacityTo(int v) | v 的剩余流量 |
| double addResidualFlowTo(int v, double delta) | 将 v 的流量增加 delta |
| String toString() | 对象的字符串表示 |

流量网络的 API：

| public class FlowNetwork | 说明 | 
| :----: | :----: |
| FlowNetwork(int V) | 创建一个含有 V 个顶点的空网格 |
| FlowNetwork(In in) | 从输入流中构造流量网络 |
| int V() | 顶点总数 |
| int E() | 边的总数 |
| void addEdge(FlowEdge e) | 向流量网络中添加边 e |
| Iterable<FlowEdge> adj(int v) | 从 v 指出的边 |
| Iterable<FlowEdge> edges() | 流量网络中的所有边 |
| String toString() | 对象的字符串表示 |

### 